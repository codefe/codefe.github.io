{"sta":1,"data":{"subTitle":"值修正及附加属性","content":"<p>以下products代理会计算传值并根据需要转换为数组。这个代理对象同时支持一个叫做 latestBrowser的附加属性，这个属性可以同时作为 getter 和 setter。</p><pre><code>let products = new Proxy({\n  browsers: ['Internet Explorer', 'Netscape']\n}, {\n  get: function(obj, prop) {\n    // 附加一个属性\n    if (prop === 'latestBrowser') {\n      return obj.browsers[obj.browsers.length - 1];\n    }\n\n    // 默认行为是返回属性值\n    return obj[prop];\n  },\n  set: function(obj, prop, value) {\n    // 附加属性\n    if (prop === 'latestBrowser') {\n      obj.browsers.push(value);\n      return;\n    }\n\n    // 如果不是数组，则进行转换\n    if (typeof value === 'string') {\n      value = [value];\n    }\n\n    // 默认行为是保存属性值\n    obj[prop] = value;\n\n    // 表示成功\n    return true;\n  }\n});\n\nconsole.log(products.browsers); // ['Internet Explorer', 'Netscape']\nproducts.browsers = 'Firefox';  // 如果不小心传入了一个字符串\nconsole.log(products.browsers); // ['Firefox'] &lt;- 也没问题, 得到的依旧是一个数组\n\nproducts.latestBrowser = 'Chrome';\nconsole.log(products.browsers);      // ['Firefox', 'Chrome']\nconsole.log(products.latestBrowser); // 'Chrome'</code></pre><p><br></p>"}}