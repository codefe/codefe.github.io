{"sta":1,"data":{"subTitle":"一个完整的 traps 列表示例","content":"<p>这里为了创建一个完整的 traps 列表示例，我们将尝试代理化一个非原生对象，这特别适用于这类操作：由 发布在 document.cookie页面上的“小型框架”创建的docCookies全局对象。</p><pre><code>/*\n  var docCookies = ... get the \"docCookies\" object here:\n  https://developer.mozilla.org/zh-CN/docs/DOM/document.cookie#A_little_framework.3A_a_complete_cookies_reader.2Fwriter_with_full_unicode_support\n*/\n\nvar docCookies = new Proxy(docCookies, {\n  \"get\": function (oTarget, sKey) {\n    return oTarget[sKey] || oTarget.getItem(sKey) || undefined;\n  },\n  \"set\": function (oTarget, sKey, vValue) {\n    if (sKey in oTarget) { return false; }\n    return oTarget.setItem(sKey, vValue);\n  },\n  \"deleteProperty\": function (oTarget, sKey) {\n    if (sKey in oTarget) { return false; }\n    return oTarget.removeItem(sKey);\n  },\n  \"enumerate\": function (oTarget, sKey) {\n    return oTarget.keys();\n  },\n  \"ownKeys\": function (oTarget, sKey) {\n    return oTarget.keys();\n  },\n  \"has\": function (oTarget, sKey) {\n    return sKey in oTarget || oTarget.hasItem(sKey);\n  },\n  \"defineProperty\": function (oTarget, sKey, oDesc) {\n    if (oDesc &amp;&amp; \"value\" in oDesc) { oTarget.setItem(sKey, oDesc.value); }\n    return oTarget;\n  },\n  \"getOwnPropertyDescriptor\": function (oTarget, sKey) {\n    var vValue = oTarget.getItem(sKey);\n    return vValue ? {\n      \"value\": vValue,\n      \"writable\": true,\n      \"enumerable\": true,\n      \"configurable\": false\n    } : undefined;\n  },\n});\n\n/* Cookies 测试 */\n\nalert(docCookies.my_cookie1 = \"First value\");\nalert(docCookies.getItem(\"my_cookie1\"));\n\ndocCookies.setItem(\"my_cookie1\", \"Changed value\");\nalert(docCookies.my_cookie1);</code></pre><p><br></p>"}}