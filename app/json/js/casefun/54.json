{"sta":1,"data":{"subTitle":"解决offsetX兼容性问题","content":"<pre><code>// 针对火狐不支持offsetX/Y\nfunction getOffset(e) {\n  var target = e.target, // 当前触发的目标对象\n    eventCoord,\n    pageCoord,\n    offsetCoord;\n\n  // 计算当前触发元素到文档的距离\n  pageCoord = getPageCoord(target);\n\n  // 计算光标到文档的距离\n  eventCoord = {\n    X: window.pageXOffset + e.clientX,\n    Y: window.pageYOffset + e.clientY\n  };\n\n  // 相减获取光标到第一个定位的父元素的坐标\n  offsetCoord = {\n    X: eventCoord.X - pageCoord.X,\n    Y: eventCoord.Y - pageCoord.Y\n  };\n  return offsetCoord;\n}\n\nfunction getPageCoord(element) {\n  var coord = { X: 0, Y: 0 };\n  // 计算从当前触发元素到根节点为止，\n  // 各级 offsetParent 元素的 offsetLeft 或 offsetTop 值之和\n  while (element) {\n    coord.X += element.offsetLeft;\n    coord.Y += element.offsetTop;\n    element = element.offsetParent;\n  }\n  return coord;\n}</code></pre><p><br></p>"}}