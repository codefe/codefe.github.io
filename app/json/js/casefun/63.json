{"sta":1,"data":{"subTitle":"金额大写转换函数","content":"<pre><code>function transform(tranvalue) {\n  try {\n    var i = 1;\n    var dw2 = new Array(\"\", \"万\", \"亿\"); //大单位\n    var dw1 = new Array(\"拾\", \"佰\", \"仟\"); //小单位\n    var dw = new Array(\n      \"零\",\n      \"壹\",\n      \"贰\",\n      \"叁\",\n      \"肆\",\n      \"伍\",\n      \"陆\",\n      \"柒\",\n      \"捌\",\n      \"玖\"\n    ); \n    //整数部分用\n    //以下是小写转换成大写显示在合计大写的文本框中\n    //分离整数与小数\n    var source = splits(tranvalue);\n    var num = source[0];\n    var dig = source[1];\n    //转换整数部分\n    var k1 = 0; //计小单位\n    var k2 = 0; //计大单位\n    var sum = 0;\n    var str = \"\";\n    var len = source[0].length; //整数的长度\n    for (i = 1; i &lt;= len; i++) {\n      var n = source[0].charAt(len - i); //取得某个位数上的数字\n      var bn = 0;\n      if (len - i - 1 &gt;= 0) {\n        bn = source[0].charAt(len - i - 1); //取得某个位数前一位上的数字\n      }\n      sum = sum + Number(n);\n      if (sum != 0) {\n        str = dw[Number(n)].concat(str); //取得该数字对应的大写数字，并插入到str字符串的前面\n        if (n == \"0\") sum = 0;\n      }\n      if (len - i - 1 &gt;= 0) {\n        //在数字范围内\n        if (k1 != 3) {\n          //加小单位\n          if (bn != 0) {\n            str = dw1[k1].concat(str);\n          }\n          k1++;\n        } else {\n          //不加小单位，加大单位\n          k1 = 0;\n          var temp = str.charAt(0);\n          if (temp == \"万\" || temp == \"亿\")\n            //若大单位前没有数字则舍去大单位\n            str = str.substr(1, str.length - 1);\n          str = dw2[k2].concat(str);\n          sum = 0;\n        }\n      }\n      if (k1 == 3) {\n        //小单位到千则大单位进一\n        k2++;\n      }\n    }\n    //转换小数部分\n    var strdig = \"\";\n    if (dig != \"\") {\n      var n = dig.charAt(0);\n      if (n != 0) {\n        strdig += dw[Number(n)] + \"角\"; //加数字\n      }\n      var n = dig.charAt(1);\n      if (n != 0) {\n        strdig += dw[Number(n)] + \"分\"; //加数字\n      }\n    }\n    str += \"元\" + strdig;\n  } catch (e) {\n    return \"0元\";\n  }\n  return str;\n}\n//拆分整数与小数\nfunction splits(tranvalue) {\n  var value = new Array(\"\", \"\");\n  temp = tranvalue.split(\".\");\n  for (var i = 0; i &lt; temp.length; i++) {\n    value = temp;\n  }\n  return value;\n}</code></pre><p><br></p>"}}