{"sta":1,"data":{"subTitle":"如何渲染几万条数据并不卡住界面","content":"<p>根据题意，如果我们一次性渲染刷新几万条数据，页面会卡顿，因此只能分批渲染，既然知道原理我们就可以使用setInterval和setTimeout、requestAnimationFrame来实现定时分批渲染，实现每16 ms 刷新一次<br></p><p>\n<br>requestAnimationFrame跟setTimeout/setInterval差不多，通过递归调用同一方法来不断更新画面以达到动起来的效果，但它优于setTimeout/setInterval的地方在于它是由浏览器专门为动画提供的API，在运行时浏览器会自动优化方法的调用，并且如果页面不是激活状态下的话，动画会自动暂停，有效节省了CPU开销。&nbsp;<br></p><pre>function refresh(total, onceCount) {\n  //total -&gt; 渲染数据总数 onceCount -&gt; 一次渲染条数\n  let count = 0, //初始渲染次数值\n    loopCount = total / onceCount //渲染次数\n  function refreshAnimation() {\n    /*\n    * 在此处渲染数据\n    */\n    if (count &lt; loopCount) {\n      count++\n      requestAnimationFrame(refreshAnimation)\n    }\n  }\n  requestAnimationFrame(refreshAnimation)\n}</pre><p><br></p>"}}