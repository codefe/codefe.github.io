{"sta":1,"data":{"subTitle":"JS控制html分屏加载","content":"<p>在WEB项目中，影响客户体验度的一个重要元素就是页面响应的速度。</p><p>在实际工作场景中，存在一部分页面内容需要动态加载，因为页面的元素会受到销量、节日、促销等影响，优化这类型页面加载的方式就是分屏加载页面内容。&nbsp;</p><p>拿京东首页举例，它存在分类树、广告轮播图、用户信息、京东秒杀、排行榜、时尚达人等等模块。&nbsp;</p><p><img src=\"https://img-blog.csdn.net/20180121154452640?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGVvMTg3/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast\" style=\"max-width:100%;\"></p><p>每个模块都是一个以纵坐标为标尺的DIV。所以在页面加载的时候就可以获取当前页面高度进行分屏动态加载。</p><p>在设计页面的时候就可以将每个模块的加载作为一个单独的函数，具体实现如下：</p><pre><code>//设置标记，保证一个模块只加载一次\n    var flag2 = false;\n    var flag3 = false;\n     $(window).scroll(function () {\n        console.info($(window).scrollTop());//获取滚动条垂直位置\n        var windowHight = $(window).scrollTop();\n        if(windowHight&gt;80 &amp;&amp; flag2!=true){\n            ECaiRecomContextNew();//执行动态加载模块二函数\n            flag2=true;\n        }\n        if(windowHight&gt;200 &amp;&amp; flag3!=true){\n            advertCarousel();//执行动态加载模块三函数\n            flag3 = true;\n        }\n    });</code></pre><p><br></p>"}}