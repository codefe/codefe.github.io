{"sta":1,"data":{"subTitle":"nginx基本配置文件详解","content":"<h3><span style=\"font-weight: normal;\">​</span>查看Nginx的安装目录</h3><p>在使用yum安装完Nginx后，需要知道系统中多了那些文件，它们都安装到了那里。可以使用下面的命令进行查看：<br><blockquote>rpm -ql nginx\n</blockquote>rpm 是linux的rpm包管理工具，-q 代表询问模式，-l 代表返回列表，这样我们就可以找到nginx的所有安装位置了。\n<br>\n<br>列表列出的内容还是比较多的，我们尽量给大家进行讲解，我们这节先来看看重要的文件。<br><h3>nginx.conf文件解读\n</h3>nginx.conf 文件是Nginx总配置文件，在我们搭建服务器时经常调整的文件。\n<br>\n<br>进入etc/nginx目录下，然后用vim进行打开<br><blockquote>cd /etc/nginx<br>\nvim nginx.conf\n</blockquote>下面是文件的详细注释，我几乎把每一句都进行了注释，你可以根据你的需要来进行配置。\n<br>\n</p><pre><code>#运行用户，默认即是nginx，可以不进行设置\nuser  nginx;\n#Nginx进程，一般设置为和CPU核数一样\nworker_processes  1;   \n#错误日志存放目录\nerror_log  /var/log/nginx/error.log warn;\n#进程pid存放位置\npid        /var/run/nginx.pid;\n\n\nevents {\n    worker_connections  1024; # 单个后台进程的最大并发数\n}\n\n\nhttp {\n    include       /etc/nginx/mime.types;   #文件扩展名与类型映射表\n    default_type  application/octet-stream;  #默认文件类型\n    #设置日志模式\n    log_format  main  '$remote_addr - $remote_user [$time_local] \"$request\" '\n                      '$status $body_bytes_sent \"$http_referer\" '\n                      '\"$http_user_agent\" \"$http_x_forwarded_for\"';\n\n    access_log  /var/log/nginx/access.log  main;   #nginx访问日志存放位置\n\n    sendfile        on;   #开启高效传输模式\n    #tcp_nopush     on;    #减少网络报文段的数量\n\n    keepalive_timeout  65;  #保持连接的时间，也叫超时时间\n\n    #gzip  on;  #开启gzip压缩\n\n    include /etc/nginx/conf.d/*.conf; #包含的子配置项位置和文件</code></pre><p><h3>default.conf 配置项讲解 \n</h3>我们看到最后有一个子文件的配置项，那我们打开这个include子文件配置项看一下里边都有些什么内容。\n<br>\n<br>进入conf.d目录，然后使用vim default.conf进行查看。</p><pre><code>server {\n    listen       80;   #配置监听端口\n    server_name  localhost;  //配置域名\n\n    #charset koi8-r;     \n    #access_log  /var/log/nginx/host.access.log  main;\n\n    location / {\n        root   /usr/share/nginx/html;     #服务默认启动目录\n        index  index.html index.htm;    #默认访问文件\n    }\n\n    #error_page  404              /404.html;   # 配置404页面\n\n    # redirect server error pages to the static page /50x.html\n    #\n    error_page   500 502 503 504  /50x.html;   #错误状态码的显示页面，配置后需要重启\n    location = /50x.html {\n        root   /usr/share/nginx/html;\n    }\n\n    # proxy the PHP scripts to Apache listening on 127.0.0.1:80\n    #\n    #location ~ \\.php$ {\n    #    proxy_pass   http://127.0.0.1;\n    #}\n\n    # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000\n    #\n    #location ~ \\.php$ {\n    #    root           html;\n    #    fastcgi_pass   127.0.0.1:9000;\n    #    fastcgi_index  index.php;\n    #    fastcgi_param  SCRIPT_FILENAME  /scripts$fastcgi_script_name;\n    #    include        fastcgi_params;\n    #}\n\n    # deny access to .htaccess files, if Apache's document root\n    # concurs with nginx's one\n    #\n    #location ~ /\\.ht {\n    #    deny  all;\n    #}\n}</code></pre><p>明白了这些配置项，我们知道我们的服务目录放在了/usr/share/nginx/html下，可以使用命令进入看一下目录下的文件。</p><pre><code>cd /usr/share/nginx/html\nls</code></pre><p>可以看到目录下面有两个文件，50x.html 和 index.html。我们可以使用vim进行编辑。\n<br>\n<br>到这里，其实可以预想到，我们的nginx服务器已经可以为html提供服务器了。我们可以打开浏览器，访问ip地址试一试。</p><p><br></p>"}}