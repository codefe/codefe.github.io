{"sta":1,"data":{"subTitle":"自定义错误页和访问设置","content":"<p>一个好的网站会武装到牙齿，任何错误都有给用户友好的提示。比如当网站遇到页面没有找到的时候，我们要提示页面没有找到，并给用户可返回性。错误的种类有很多，所以真正的好产品会给顾客不同的返回结果。<br></p><p><h3>多错误指向一个页面</h3>在/etc/nginx/conf.d/default.conf 是可以看到下面这句话的。<br><blockquote>error_page   500 502 503 504  /50x.html;\n</blockquote>error_page指令用于自定义错误页面，500，502，503，504 这些就是HTTP中最常见的错误代码，/50.html 用于表示当发生上述指定的任意一个错误的时候，都是用网站根目录下的/50.html文件进行处理。\n<br>\n<br><h3>单独为错误置顶处理方式</h3>有些时候是要把这些错误页面单独的表现出来，给用户更好的体验。所以就要为每个错误码设置不同的页面。设置方法如下：<br><blockquote>error_page 404  /404_error.html;\n</blockquote>然后到网站目录下新建一个404_error.html 文件，并写入一些信息。<br><blockquote>&lt;html&gt;<br>\n&lt;meta charset=\"UTF-8\"&gt;<br>\n&lt;body&gt;<br>\n&lt;h1&gt;404页面没有找到!&lt;/h1&gt;<br>\n&lt;/body&gt;<br>\n&lt;/html&gt;\n</blockquote>然后重启我们的服务，再进行访问，你会发现404页面发生了变化。\n<br>\n<br><h3>把错误码换成一个地址</h3>处理错误的时候，不仅可以只使用本服务器的资源，还可以使用外部的资源。比如我们将配置文件设置成这样。<br><blockquote>error_page  404 http://jspang.com;\n</blockquote>我们使用了技术胖的博客地址作为404页面没有找到的提示，就形成了，没有找到文件，就直接跳到了技术胖的博客上了。\n<br>\n<br><h3>简单实现访问控制</h3>有时候我们的服务器只允许特定主机访问，比如内部OA系统，或者应用的管理后台系统，更或者是某些应用接口，这时候我们就需要控制一些IP访问，我们可以直接在location里进行配置。\n<br>\n<br>可以直接在default.conf里进行配置。<br><blockquote> location / {<br>\n        deny   123.9.51.42;<br>\n        allow  45.76.202.231;<br>\n    }\n</blockquote>配置完成后，重启一下服务器就可以实现限制和允许访问了。这在工作中非常常用，一定要好好记得。</p><p><br></p>"}}