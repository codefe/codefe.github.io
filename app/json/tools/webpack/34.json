{"sta":1,"data":{"subTitle":"静态资源自动打包上传阿里 oss、华为 obs","content":"<p>开启文件上传 ali oss，需要将 publicPath 改成 ali oss 资源 url 前缀,也就是修改 VUE_APP_PUBLIC_PATH。具体配置参见<a href=\"https://github.com/staven630/webpack-oss\">阿里 oss 插件 webpack-oss</a>、<a href=\"https://github.com/staven630/huawei-obs-plugin\">华为 obs 插件 huawei-obs-plugin</a><br></p><p>npm i -D webpack-oss</p><pre><code>const AliOssPlugin = require(\"webpack-oss\");\nconst IS_PROD = [\"production\", \"prod\"].includes(process.env.NODE_ENV);\n\nconst format = AliOssPlugin.getFormat();\n\nmodule.exports = {\n  publicPath: IS_PROD ? `${process.env.VUE_APP_PUBLIC_PATH}/${format}` : \"./\", // 默认'/'，部署应用包时的基本 URL\n  configureWebpack: config =&gt; {\n    const plugins = [];\n\n    if (IS_PROD) {\n      plugins.push(\n        new AliOssPlugin({\n          accessKeyId: process.env.ACCESS_KEY_ID,\n          accessKeySecret: process.env.ACCESS_KEY_SECRET,\n          region: process.env.REGION,\n          bucket: process.env.BUCKET,\n          prefix: process.env.PREFIX,\n          exclude: /.*\\.html$/,\n          format\n        })\n      );\n    }\n    config.plugins = [...config.plugins, ...plugins];\n  }\n};</code></pre><p><br></p>"}}