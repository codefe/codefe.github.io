{"sta":1,"data":{"subTitle":"使用 SVG 组件","content":"<p></p><blockquote>npm i -D svg-sprite-loader</blockquote><p>新增 SvgIcon 组件。<br></p><pre><code>&lt;template&gt;\n  &lt;svg class=\"svg-icon\"\n       aria-hidden=\"true\"&gt;\n    &lt;use :xlink:href=\"iconName\" /&gt;\n  &lt;/svg&gt;\n&lt;/template&gt;\n\n&lt;script&gt;\nexport default {\n  name: 'SvgIcon',\n  props: {\n    iconClass: {\n      type: String,\n      required: true\n    }\n  },\n  computed: {\n    iconName() {\n      return `#icon-${this.iconClass}`\n    }\n  }\n}\n&lt;/script&gt;\n\n&lt;style scoped&gt;\n.svg-icon {\n  width: 1em;\n  height: 1em;\n  vertical-align: -0.15em;\n  fill: currentColor;\n  overflow: hidden;\n}\n&lt;/style&gt;</code></pre><p>在 src 文件夹中创建 icons 文件夹。icons 文件夹中新增 svg 文件夹（用来存放 svg 文件）与 index.js 文件：</p><pre><code>import SvgIcon from \"@/components/SvgIcon\";\nimport Vue from \"vue\";\n\n// 注册到全局\nVue.component(\"svg-icon\", SvgIcon);\n\nconst requireAll = requireContext =&gt; requireContext.keys().map(requireContext);\nconst req = require.context(\"./svg\", false, /\\.svg$/);\nrequireAll(req);</code></pre><p>在 main.js 中导入 icons/index.js</p><blockquote>import \"@/icons\";</blockquote><p>修改 vue.config.js</p><pre><code>const path = require(\"path\");\nconst resolve = dir =&gt; path.join(__dirname, dir);\n\nmodule.exports = {\n  chainWebpack: config =&gt; {\n    const svgRule = config.module.rule(\"svg\");\n    svgRule.uses.clear();\n    svgRule.exclude.add(/node_modules/);\n    svgRule\n      .test(/\\.svg$/)\n      .use(\"svg-sprite-loader\")\n      .loader(\"svg-sprite-loader\")\n      .options({\n        symbolId: \"icon-[name]\"\n      });\n\n    const imagesRule = config.module.rule(\"images\");\n    imagesRule.exclude.add(resolve(\"src/icons\"));\n    config.module.rule(\"images\").test(/\\.(png|jpe?g|gif|svg)(\\?.*)?$/);\n  }\n};</code></pre><p><br></p><p><br></p>"}}