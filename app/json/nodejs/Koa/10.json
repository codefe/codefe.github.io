{"sta":1,"data":{"subTitle":"koa中cookie使用","content":"<p>1. cookie保存在浏览器客户端<br></p><p>2. 可以让我们用一个浏览器访问同一个域名的时候共享数据</p><p><h3>作用：\n</h3>1. 保存用户信息\n<br>2. 浏览器历史记录\n<br>3. 猜你喜欢的功能\n<br>4. x天免登录\n<br>5. 多个页面之间的数据传递\n<br>6. 实现购物车功能\n<br>\n<br><h3>设置cookie的值\n</h3><blockquote>ctx.cookies.set(name,value,[options])\n</blockquote></p><p>options参数\n<br>1. maxAge: 一个数字，表示从Date.now()得到的毫秒数（60*1000*60）\n<br>2. expires: cookie过期的时间（2021-09-01 || 7）(注：1，2条，只要设置一个就行了)\n<br>3. path: cookie路径，默认是'/'(/news这样就只能在news页面访问)\n<br>4. domain: cookie 域名（.baidu.com二级域名也可以共享数据）\n<br>5. secure: 安全cookie,默认false，true表示只有https可以访问\n<br>6. httpOnly: 是否只是服务器可访问cookie，默认是true，false时服务器客户端都可以访问\n<br>7. overwrite: 一个布尔值，表示是否覆盖以前设置的同名的 cookie (默认是 false). 如果是 true, 在同一个请求中设置相同名称的所有 Cookie（不管路径或域）是否在设置此Cookie 时从 Set-Cookie 标头中过滤掉。意义不大，true,false都会覆盖</p><h4></h4><p><h4>常用设置\n</h4><blockquote>ctx.cookies.set(name,value,{<br>\n&nbsp; &nbsp; maxAge: 60*1000*60<br>\n})\n</blockquote>\n<br><font color=\"#c24f4a\">注：value设置成中文时有bug\n</font><br>解决方法\n<br><blockquote>转换成base64编码：str = new Buffer('').toString('base64')<br>\n还原成字符串：new Buffer('str','base64').toString()\n</blockquote>\n<br><h3>获取cookie的值\n</h3><blockquote>ctx.cookies.get('name');\n</blockquote>\n<br>\n<br>\n<br></p><p>&nbsp;<br></p>"}}