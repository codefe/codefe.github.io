{"sta":1,"data":{"subTitle":"Koa设置全局变量","content":"<p>有时候我们需要设置一些全局的变量，在各个路由模块中使用，下面我们看看那Koa2如何设置全局变量，以及Koa2中图和设置全局模板数据。<br></p><p>Koa中设置全局变量可以通过  ctx.state.变量名    来设置 如下：</p><pre>router.use(async (ctx,next)=&gt;{\n    \n    //全局的G变量\n    ctx.state.G={\n        url:'http://www.baidu.com',\n        userinfo:ctx.session.userinfo,\n        prevPage:ctx.request.headers['referer']   /*上一页的地址*/\n    }\n   \n})</pre><p>在路由中获取全局变量也是通过   ctx.state.变量名   来获取 \n<br>我们通过    ctx.state.变量    设置的全局变量可以直接在模板用使用哦\n<br>\n<br>如上代码： 如果在其他模块中使用变量   直接通过  ctx.state.G.url来调用\n<br>\n<br>如果在模板中使用直接通过   &lt;%=url%&gt; 来获取</p>"}}