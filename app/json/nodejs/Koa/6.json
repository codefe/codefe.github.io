{"sta":1,"data":{"subTitle":"post提交数据,koa-bodyparser中间件的使用","content":"<h3>原生获取数据</h3><p>1. 这里封装一个异步的函数 getPostData.js\n<br></p><pre>exports.getPostData = function(ctx){\n    return new Promise((resolve,reject)=&gt;{\n        try{\n            let str = '';\n            ctx.req.on('data',function(chunk){\n                str+=chunk;\n            })\n            ctx.req.on('end',function(chunk){\n                resolve(str)\n            })\n        }catch(err){\n            reject(err)\n        }\n    })\n}</pre><p><br></p><p>2. 导入原生处理\n<br></p><pre>const common = require('getPostData.js');\nrouter.post('/save',async (ctx)=&gt;{\n    //获取数据\n    let data = await common.getPostData(ctx);\n    ctx.body = data;\n})</pre><p><br></p><p><h3>利用koa-bodyparser中间件获取数据\n</h3>1. 安装koa-bodyparser\n<br>2. 引入 bodyparser = require('koa-bodyparser'); \n<br>   app.use(bodyparser())\n<br>3. 使用\n<br>   ctx.body = ctx.request.body\n<br>\n<br></p>"}}