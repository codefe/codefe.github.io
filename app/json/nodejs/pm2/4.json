{"sta":1,"data":{"subTitle":"PM2配置文件方式","content":"<p>生成示例配置文件</p><pre><code>pm2 ecosystem        //生成一个示例JSON配置文件\npm2 init</code></pre><p>配置文件示例（实际使用自行删除）</p><pre><code>module.exports = {\n    apps : [{\n        name      : 'API',      //应用名\n        script    : 'app.js',   //应用文件位置\n        env: {\n            PM2_SERVE_PATH: \".\",    //静态服务路径\n            PM2_SERVE_PORT: 8080,   //静态服务器访问端口\n            NODE_ENV: 'development' //启动默认模式\n        },\n        env_production : {\n            NODE_ENV: 'production'  //使用production模式 pm2 start ecosystem.config.js --env production\n        },\n        instances:\"max\",          //将应用程序分布在所有CPU核心上,可以是整数或负数\n        watch:true,               //监听模式\n        output: './out.log',      //指定日志标准输出文件及位置\n        error: './error.log',     //错误输出日志文件及位置，pm2 install pm2-logrotate进行日志文件拆分\n        merge_logs: true,         //集群情况下，可以合并日志\n        log_type:\"json\",          //日志类型\n        log_date_format: \"DD-MM-YYYY\",  //日志日期记录格式\n    }],\n    deploy : {\n        production : {\n            user : 'node',                      //ssh 用户\n            host : '212.83.163.1',              //ssh 地址\n            ref  : 'origin/master',             //GIT远程/分支\n            repo : 'git@github.com:repo.git',   //git地址\n            path : '/var/www/production',       //服务器文件路径\n            post-deploy : 'npm install &amp;&amp; pm2 reload ecosystem.config.js --env production'  //部署后的动作\n        }\n    }\n};</code></pre><p><br></p>"}}