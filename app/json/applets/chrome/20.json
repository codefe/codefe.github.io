{"sta":1,"data":{"subTitle":"browserAction API 使用示例","content":"<p><h3>一、说明</h3>扩展程序的&nbsp;browser_action&nbsp;的常用&nbsp;API&nbsp;的使用和示例。</p><p><divcourier new',=\"\" monospace;font-weight:=\"\" normal;font-size:=\"\" 14px;line-height:=\"\" 19px;white-space:=\"\" pre;\"=\"\"><img src=\"/app/json/applets/chrome/imgs/24.jpg\" style=\"max-width:100%;\"></divcourier></p><h3><span>二、manifest.json</span></h3><div><pre>{\n    \"name\": \"Getting Started Example\",\n    \"version\": \"1.0\",\n    \"description\": \"Build an Extension!\",\n    \"permissions\": [\"storage\", \"declarativeContent\", \"contextMenus\"],\n    \"background\": {\n      \"scripts\": [\"background.js\"],\n      \"persistent\": false\n    },\n    \"browser_action\":{\n        \"default_popup\": \"popup.html\"\n    },\n    \"icons\": {\n        \"16\": \"images/get_started16.png\",\n        \"32\": \"images/get_started32.png\",\n        \"48\": \"images/get_started48.png\",\n        \"128\": \"images/get_started128.png\"\n    },\n    \"manifest_version\": 2\n  }</pre><p><h3>三、popup.html\n</h3>因为使用了 popup 的显示方式，因此加了一些 按钮：</p><pre>&lt;html&gt;\n    &lt;head&gt;\n      &lt;title&gt;Water Popup&lt;/title&gt;\n      &lt;link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css\"&gt;\n      &lt;style&gt;\n        .wrapper{ \n          width: 750px;\n          height: 300px;\n        }\n        .btn {\n          margin-bottom: 20px;\n        }\n      &lt;/style&gt;\n    &lt;/head&gt;\n    &lt;body&gt;\n      &lt;div class=\"wrapper container\"&gt;\n        &lt;h2&gt;browserAction &lt;/h2&gt;\n        &lt;button class=\"btn btn-primary\" id=\"setTitle\"&gt;setTitle&lt;/button&gt;\n        &lt;button class=\"btn btn-primary\" id=\"getTitle\"&gt;getTitle&lt;/button&gt;\n        &lt;button class=\"btn btn-primary\" id=\"setPopup\"&gt;setPopup&lt;/button&gt;\n        &lt;button class=\"btn btn-primary\" id=\"getPopup\"&gt;getPopup&lt;/button&gt; \n        &lt;button class=\"btn btn-primary\" id=\"setBadgeText\"&gt;setBadgeText&lt;/button&gt; \n        &lt;button class=\"btn btn-primary\" id=\"clearBadgeText\"&gt;clearBadgeText&lt;/button&gt; \n        &lt;button class=\"btn btn-primary\" id=\"getBadgeText\"&gt;getBadgeText&lt;/button&gt; \n        &lt;button class=\"btn btn-primary\" id=\"setBadgeBackgroundColor\"&gt;setBadgeBackgroundColor&lt;/button&gt; \n        &lt;button class=\"btn btn-primary\" id=\"getBadgeBackgroundColor\"&gt;getBadgeBackgroundColor&lt;/button&gt; \n      &lt;/div&gt; \n      &lt;script src=\"popup.js\"&gt;&lt;/script&gt;\n    &lt;/body&gt;\n  &lt;/html&gt;</pre><p>popup.js\n<br>页面的逻辑是放在 popup.js 中：</p><pre>const buttonSetTitle = document.getElementById('setTitle');\nconst buttonGetTitle = document.getElementById('getTitle');\nconst setPopup = document.getElementById('setPopup');\nconst getPopup = document.getElementById('getPopup');\nconst setBadgeText = document.getElementById('setBadgeText');\nconst clearBadgeText = document.getElementById('clearBadgeText');\nconst getBadgeText = document.getElementById('getBadgeText');\nconst setBadgeBackgroundColor = document.getElementById('setBadgeBackgroundColor');\nconst getBadgeBackgroundColor = document.getElementById('getBadgeBackgroundColor');\n\nbuttonSetTitle &amp;&amp; buttonSetTitle.addEventListener('click', () =&gt; {\n    chrome.browserAction.setTitle({\n        title: 'set new title'\n    }, () =&gt; {\n        alert('set new title successed!')\n    })\n});\n \nbuttonGetTitle &amp;&amp; buttonGetTitle.addEventListener('click', () =&gt; {\n    chrome.browserAction.getTitle({}, (res) =&gt; {\n        alert(res);\n    })\n}); \n\nsetPopup.addEventListener('click', () =&gt; {\n    chrome.browserAction.setPopup({\n        popup: './popup2.html' \n    }, (res) =&gt; {\n        alert(JSON.stringify(res))\n    }) \n});\n\ngetPopup.addEventListener('click', () =&gt; {\n    chrome.browserAction.getPopup({}, (res) =&gt; {\n        alert(JSON.stringify(res))\n    })\n});\n\nsetBadgeText.addEventListener('click', () =&gt; {\n    chrome.browserAction.setBadgeText({\n        text: 'newBadge'\n    }, (res) =&gt; {\n        alert(JSON.stringify(res))\n    })\n});\n\nclearBadgeText.addEventListener('click', () =&gt; {\n    chrome.browserAction.setBadgeText({\n        text: ''\n    }, (res) =&gt; {\n        alert(JSON.stringify(res))\n    })\n});\n\ngetBadgeText.addEventListener('click', () =&gt; {\n    chrome.browserAction.getBadgeText({}, (res) =&gt; {\n        alert(JSON.stringify(res))\n    })\n});\n\nsetBadgeBackgroundColor.addEventListener('click', () =&gt; {\n    chrome.browserAction.setBadgeBackgroundColor({\n        color: '#FF5000'\n    }, (res) =&gt; {\n        alert(JSON.stringify(res))\n    })\n});\n\ngetBadgeBackgroundColor.addEventListener('click', () =&gt; {\n    chrome.browserAction.getBadgeBackgroundColor({}, (res) =&gt; {\n        alert(JSON.stringify(res))\n    })\n});</pre><p><br></p><p><br></p><p><br></p></div>"}}