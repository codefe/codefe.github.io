{"sta":1,"data":{"subTitle":"mainfest.json入口文件","content":"<p>一、描述\n<br>每个扩展程序一定会有一个 JSON 描述的 manifest.json 文件来提供整个扩展程序所需要的重要信息。\n<br>\n<br>二、字段阐述\n<br>下面代码中列出了扩展程序支持的 manifest 字段，也有每个字段的链接说明。</p><pre>{\n  // 清单版本号，建议使用 版本 2，版本 1 是旧的，已弃用，不建议使用\n  \"manifest_version\": 2, \n  \"name\": \"chome-plugin\", // 插件名称\n  \"version\": \"1.8.6\",  // 插件版本\n  // 这里写些废话，举个栗子，‘应产品要求，杀个程序祭天’\n  \"description\": \"This is an extension for your chrome\", \n  //图标\n  \"icons\": {\n    \"16\": \"images/custom/16x16.png\",\n    \"48\": \"images/custom/48x48.png\",\n    \"128\": \"images/custom/128x128.png\"\n  },\n  //browser_action和page_action只能添加一个\n  \"browser_action\": { //浏览器级别行为，所有页面均生效\n    \"default_icon\": \"images/custom/16x16.png\",//图标的图片\n    \"default_title\": \"Hello ELSE\", //鼠标移到图标显示的文字 \n    \"default_popup\": \"html/popup.html\" //单击图标后弹窗页面\n  }, \n  \"page_action\":{ //页面级别的行为，只在特定页面下生效 \n    \"default_icon\":{\n        \"24\":\"images/custom/24x24.png\",\n        \"38\":\"images/custom/38x38.png\"\n        },\n    \"default_popup\": \"html/popup.html\",\n    \"default_title\":\"Hello ELSE\"\n  },\n\n  // 可选\n  \"author\": \"ELSE TEAM\",\n  \"automation\": \"...\",   \n  //后台常驻\n  \"background\": {\n    \"scripts\": [\n      \"scripts/background.js\",\n      \"scripts/devtools-page.js\"\n    ]\n  },\n  \"devtools_page\": \"html/devtools-page.html\",\n\n  // 定义对页面内容进行操作的脚本\n  \"content_scripts\": [\n    {\n      \"js\":[\"js/else-insert.js\"],\n      \"css\": [\"css/else-insert.css\"],\n      \"matches\":[\"&lt;all_urls&gt;\"] // 只在这些站点下 content_scripts会运行\n    }\n  ],\n  // 数组，声明插件所需要的权限，这里就是很危险的存在了，想干坏事的你是不是很激动！\n  \"permissions\": [\n    \"cookies\",\n    \"history\",\n    \"http://*/*\",\n    \"management\",\n    \"tabs\",\n    \"contextMenus\",\n    \"bookmarks\",\n    \"notifications\"\n  ]\n}</pre><p>下面代码中列出了扩展程序支持的 manifest 字段，也有每个字段的链接说明。</p><pre>{\n    // 必须存在的信息\n    \"manifest_version\": 2,  // manifest 的版本号\n    \"name\": \"My Extension\", // 扩展名称\n    \"version\": \"versionString\", // 扩展的版本号 注意是字符串格式\n  \n    // 推荐要设置的字段\n    \n    \"default_locale\": \"en\", \n    \"description\": \"A plain text description\", // 扩展程序的功能描述\n    \"icons\": {...}, // 扩展程序的图标，会在多个地方去使用，比如商店展示、管理面板等\n  \n    // 二选一或者一个都不选择\n    \n    // 使用浏览器操作将图标放置在地址栏右侧的Google Chrome主工具栏中。除了图标外，浏览器操作还可以包含工具提示，徽章和弹出窗口。\n    \"browser_action\": {...}, \n    // 使用chrome.pageAction API将图标放置在地址栏右侧的Google Chrome主工具栏中。\n    // 页面操作表示可以在当前页面上执行的操作，但不适用于所有页面。页面操作在不活动时显示为灰色。\n    \"page_action\": {...},\n    \n  \n    // 可选的\n    \"action\": ...,\n    \"author\": ...,\n    \"automation\": ...,\n    // 声明后台脚本文件地址\n    \"background\": {\n      // 推荐\n      \"persistent\": false,\n      // 可选\n      \"service_worker_script\":\n    },\n    \"chrome_settings_overrides\": {...}, //settings_overrides 是扩展程序覆盖所选 Chrome 设置的一种方式。\n    \"chrome_ui_overrides\": { // 用户界面覆盖是扩展程序覆盖所选Chrome用户界面属性的一种方式。\n      \"bookmarks_ui\": {\n        \"remove_bookmark_shortcut\": true,\n        \"remove_button\": true\n      }\n    },\n    // 覆盖页面是一种将扩展程序中的HTML文件替换为Google Chrome通常提供的网页的方法。除了HTML之外，覆盖页面通常还包含CSS和JavaScript代码。\n    \"chrome_url_overrides\": {...},\n    // 使用命令API添加触发扩展中操作的键盘快捷键，例如，打开浏览器操作或向扩展发送命令的操作。\n    \"commands\": {...},\n    \"content_capabilities\": ...,\n    //  内容脚本\n    \"content_scripts\": [{...}],\n    // 跨域相关\n    \"content_security_policy\": \"policyString\",\n    \"converted_from_user_script\": ...,\n    \"current_locale\": ...,\n    \"declarative_net_request\": ...,\n    // DevTools的 API\n    \"devtools_page\": \"devtools.html\",\n    // 用于添加拦截，阻止或修改正在使用的Web请求的规则\n    \"event_rules\": [{...}],\n    // 声明哪些扩展程序、应用和网页可以通过runtime.connect和runtime.sendMessage连接到的的扩展程序。\n    \"externally_connectable\": {\n      \"matches\": [\"*://*.example.com/*\"]\n    },\n    // 使用chrome.fileBrowserHandler API扩展Chrome OS文件浏览器。例如，你可以使用此API使用户能够将文件上传到你的网站。\n    \"file_browser_handlers\": [...],\n    // 使用chrome.fileSystemProvider API创建文件系统，可以从Chrome OS上的文件管理器访问。\n    \"file_system_provider_capabilities\": {\n      \"configurable\": true,\n      \"multiple_mounts\": true,\n      \"source\": \"network\"\n    },\n    // 扩展程序的主页\n    \"homepage_url\": \"http://path/to/homepage\",\n    // 引入共享 module\n    \"import\": [{\"id\": \"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\"}],\n    // 如果允许在隐身模式下运行，请将“隐身”清单键与“跨越”或“拆分”一起使用，以指定此扩展程序的行为方式。\n    // 使用“not_allowed”可阻止在隐身模式下启用此扩展程序。\n    \"incognito\": \"spanning, split, or not_allowed\",\n    \"input_components\": ...,\n    // 在开发期间加载扩展程序、应用或主题时，此值可用于控制扩展程序，应用或主题的唯一ID。\n    \"key\": \"publicKey\",\n    // 最小版本的 chrome 要求\n    \"minimum_chrome_version\": \"versionString\",\n    \"nacl_modules\": [...],\n    \"oauth2\": ...,\n    // 是否可离线\n    \"offline_enabled\": true,\n    // 通过多功能框API，您可以在Google Chrome的地址栏中注册关键字，地址栏也称为omnibox。\n    \"omnibox\": {\n      \"keyword\": \"aString\"\n    },\n    // 使用chrome.permissions API在运行时请求声明的可选权限而不是安装时间，以便用户了解为什么需要权限并仅授予必要的权限。\n    \"optional_permissions\": [\"tabs\"],\n    // 允许用户通过提供选项页面来自定义扩展的行为。\n    \"options_page\": \"options.html\",\n    \"options_ui\": {\n      \"chrome_style\": true,\n      \"page\": \"options.html\"\n    },\n    //  权限列表\n    \"permissions\": [\"tabs\"],\n    \"platforms\": ...,\n    // 安装要求 https://developer.chrome.com/extensions/manifest/requirements\n    \"requirements\": {...},\n    // Chrome将不再允许沙盒页面内的外部Web内容（包括嵌入式框架和脚本）。请改用webview。\n    \"sandbox\": [...],\n    // short_name（建议最多12个字符）是扩展名的简短版本。\n    \"short_name\": \"Short Name\",\n    \"signature\": ...,\n    \"spellcheck\": ...,\n    // 与本地和同步存储区域不同，托管存储区域要求其结构声明为JSON架构，并且经过Chrome严格验证。\n    // 此模式必须存储在“storage”清单键的“managed_schema”属性指示的文件中，并声明扩展支持的企业策略。\n    \"storage\": {\n      \"managed_schema\": \"schema.json\"\n    },\n    \"system_indicator\": ...,\n    // 使用chrome.ttsEngine API使用扩展实现文本到语音转换（TTS）引擎。\n    \"tts_engine\": {...},\n    \"update_url\": \"http://path/to/updateInfo.xml\",\n    \"version_name\": \"aString\",\n    \"web_accessible_resources\": [...]\n  }</pre><p>下面代码中列出了扩展程序支持的 manifest 字段，也有每个字段的链接说明。</p><pre>{\n     // Required\n     // 必须的字段3个\n     \"manifest_version\": 2, // manifest编写规范版本，目前主流2\n     \"name\": \"My Extension\",    // 插件名\n     \"version\": \"versionString\",    // 版本号\n \n     // Recommended\n     \"default_locale\": \"en\",    // 默认编码，国际化，必须要有_1coales目录，然后建立语言目录\n     \"description\": \"A plain text description\",     // 插件描述。132个字符以内\n     // 插件下载或浏览时显示的图标，可选多种规格的扩展图标。推荐大小16，48，128\n     \"icons\": {                \n         \"16\": \"icon16.png\",\n         \"48\": \"icon48.png\",\n         \"128\": \"icon128.png\"\n     },\n \n     // Pick one (or none)\n     // 图标显示在地址栏右边，能在所有页面显示 //地址栏右侧图标管理。含图标及弹出页面的设置等\n     \"browser_action\": {\n       \"default_icon\": \"image/icon-128.png\",\n        \"default_title\": \"My Test\",\n       \"default_popup\": \"html/browser.html\"\n    }, \n    // 图标显示在地址栏右侧（地址栏内），只在特定页面显示\n    // 地址栏最后附加图标。含图标及行为等\n    \"page_action\": {\n        \"default_icon\": \"image/icon-48.png\",\n        \"default_title\": \"My Test\",\n        \"default_popup\": \"html/page.html\"\n    },\n    \"theme\": {}, // 主题，用于更改整个浏览器的外观\n    \"app\": {}, // 指定扩展需要跳转到的URL\n \n     // Optional\n     \"author\": \"\",            // 插件作者\n     \"automation\": true,        // 开启自动化\n     // 指定扩展进程的background运行环境\n     // 可常驻浏览器后台的脚本，可以连接其他页面\n     \"background\": {\n         // Recommended\n         \"persistent\": false,\n         \"script\": [\"background.js\"]\n\t       \"scripts\": [\n           \"lib/jquery-3.3.1.min.js\",\n           \"js/background.js\"\n       ] ,\n        \"page\":\"html/background.html\"\n     },\n    \"background_page\": ,\n    // 覆盖当前的chrome配置\n     \"chrome_settings_overrides\": {},\n     // 覆盖当前的chrome界面配置\n     \"chrome_ui_overrides\": {\n         \"bookmarks_ui\": {\n         \"remove_bookmark_shortcut\": true,\n         \"remove_button\": true\n         }\n     },\n     // 替换页面\n     // 修改点击相应动作时返回的页面链接，只支持bookmarks、history、newtab三个页面\n     \"chrome_url_overrides\": {\n         \"bookmarks\": \"myPage.html\",\n         \"history\": \"myPage.html\",\n         \"newtab\": \"myPage.html\"\n         \"pageToOverride\": \"html/overrides.html\"\n     },\n     // 键盘触发插件快捷键\n    \"commands\": {\n         \"_execute_browser_action\": {\n             \"suggested_key\": {\n                 \"windows\": \"Ctrl+Shift+Y\",\n                 \"mac\": \"Command+Shift+Y\",\n                 \"chromeos\": \"Ctrl+Shift+U\",\n                 \"linux\": \"Ctrl+Shift+J\"\n             }\n          },\n     },\n     // 页面权限\n     \"content_capabilities\": {\n         \"matches\": [\"https://*.nyc.corp.google.com/*\"],\n         \"permissions\": [\"unlimitedStorage\", \"notifications\"] \n     },\n     // 指定在web页面运行的脚本\n     // 可以操作页面元素，不能使用chrome的api\n     \"content_scripts\": [{\n\t      \"matches\": [\"https://www.baidu.com/*\"],\n\t      \"css\": [\"css/mystyles.css\"],\n\t      \"js\": [\"lib/jquery-3.3.1.min.js\", \"js/content.js\"]\n    }], \n    // 安全策略，默认情况下禁止使用eval或者Function构造函数，以及内联js，禁止载入外部脚本\n     \"content_security_policy\": \"script-src ‘self‘; object-src ‘self‘\",\n     // 将用户脚本转化为content script，允许使用GM_* (greasemonkey)方法\n     \"converted_from_user_script\": true,\n     \"copresence\": ,\n     \"current_locale\": ,\n     // 在开发中工具中的页面\n     \"devtools_page\": \"devtools.html\",\n     // 事件监听规则及条件\n     \"event_rules\": [{\n         \"event\": \"declarativeContent.onPageChanged\",\n         \"actions\": [{\n             \"type\": \"declarativeContent.ShowPageAction\"\n         }],\n         \"conditions\": [{\n             \"type\": \"declarativeContent.PageStateMatcher\",\n             \"css\": [\"video\"]\n         }]\n     }],\n     // 哪些外部扩展、应用或网页能连接此插件\n     \"externally_connectable\": {\n         \"ids\": [\n             \"aaaaaaaaaa\",\n             \"bbbbbbbb\",\n             \"*\"        // 允许所有可使用 \"*\"\n         ],\n         \"matches\": [\"*://*.example.com/*\"],\n         \"accepts_tls_channel_id\": false\n     },\n     // 允许用户上传文件，只支持Chrome OS\n     \"file_browser_handlers\": [{\n         \"id\": \"upload\",\n         // 按钮文字\n         \"default_title\": \"Save to Gallery\",\n         \"file_filters\": [\n             \"filesystem:*.jpg\",\n             \"filesystem:*.jpeg\",\n             \"filesystem:*.png\"\n             // 匹配所有文件可用 \"filesystem:*.*\"\n         ]\n     }],\n     // 允许访问文件系统，只支持Chrome OS\n     \"file_system_provider_capabilities\": {\n         \"configurable\": true,\n         \"multiple_mounts\": true,\n         \"source\": \"network\"\n     },\n     // 插件主页，扩展的官方主页，显示在chrome扩展工具列表中\n     \"homepage_url\": \"http://path/to/homepage\",\n     // 允许其他组件调用自己的模块\n     \"export\": {\n         \"whitelist\": [\n             \"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\",\n             \"bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb\"\n         ]\n     },\n     // 调用其他组件的模块，与其他组件的export属性共用\n     \"import\": [{\"id\": \"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\"}],\n     // 隐身模式\n     \"incognito\": \"spanning or split or not_allowed\",\n     // 用户操作意图描述\n     \"intents\": {},\n     // 输入管理，键盘事件等\n     \"input_components\": [\n         {\n             \"name\": \"Test IME\",\n             \"type\": \"ime\",\n             \"id\": \"test\",\n             \"description\": \"Test IME\",    // A user visible description\n             \"language\": \"en-US\",        // The primary language this IME is used for\n             \"layouts\": [\"us::eng\"]        // The supported keyboard layouts for this IME\n         }\n     ],\n     // 自动生成，可不需要。扩展唯一标识。不需要人为指定\n     \"key\": \"publicKey\",\n     // 要求支持的chrome的最低版本\n     \"minimum_chrome_version\": \"versionString\",\n     // 消息与本地处理模块映射\n     // 使用native client 模块\n     \"nacl_modules\": [{                \n         \"path\": \"OpenOfficeViewer.nmf\",\n         \"mime_type\": \"application/vnd.oasis.opendocument.spreadsheet\"\n     }],\n     // 谷歌账户相关信息\n     \"oauth2\": ,\n     // 离线使用 // 是否允许脱机运行\n     \"offline_enabled\": true,\n     //ominbox即地址栏。用于响应地址栏的输入事件    // 搜索关键词推荐\n     \"omnibox\": {\n         \"keyword\": \"aString\"\n     },\n     // 运行时权限，非必须权限\n     \"optional_permissions\": [\"tabs\"],\n     // 设置页，可从扩展工具列表进入 // 选项页。用于在扩展管理页面跳转到选项设置\n     \"options_page\": \"options.html\",\n     // 设置页\n     \"options_ui\": {\n         \"chrome_style\": true,\n         \"page\": \"options.html\"\n     },\n    // 安装时提示的权限，基本权限\n     \"permissions\": [\n       \"https://www.baidu.com/*\",\n       \"background\",\n       \"tabs\"\n    ],\n    // 可以将部分基于平台的功能文件放入_platform_specific目录然后列在此项中减少插件体积\n     \"platforms\": ,\n     // NPAPI插件  // 扩展。可调用第三方扩展\n     \"plugins\": [{\n       \"path\": \"extension_plugin.dll\",\n       \"public\": true\n    }],\n    // 安装前置需求 // 指定所需要的特殊技术。目前只支持\"3D\"\n     \"requirements\": {\n         \"3D\": {\n             \"features\": [\"webgl\"]\n         }\n     },\n     // 放入沙盒中运行\n     \"sandbox\": [\n         {\n             \"pages\": [\n                 \"page1.html\",\n                 \"directory/page2.html\"\n             ],\n             // content_security_policy is optional.\n             \"content_security_policy\": \"sandbox allow-scripts; script-src https://www.google.com\"\n         }\n     ],\n     // 短名称，最长12个字母，如不设置则用name属性代替\n     \"short_name\": \"Short Name\",\n     \"signature\": ,\n     // 拼写检查\n     \"spellcheck\": ,\n     // 描述了各种属性的type，json格式文件，能在storage.managed API中调用\n     \"storage\": {\n         \"managed_schema\": \"schema.json\"\n     },\n     // 实验性API，只在开发版中实现，已弃用\n     \"system_indicator\": ,\n     // text to speech\n     \"tts_engine\": {\n         \"voices\": [\n             {\n                 \"voice_name\": \"Alice\",\n                 \"lang\": \"en-US\",\n                 \"gender\": \"female\",\n                 \"event_types\": [\"start\", \"marker\", \"end\"]\n             },\n             {\n                 \"voice_name\": \"Pat\",\n                 \"lang\": \"en-US\",\n                 \"event_types\": [\"end\"]\n             }\n         ]\n     },\n     // 插件更新地址，自动升级\n     \"update_url\": \"http://myhost.com/mytestextension/updates.xml\",\n     // 版本名，和version字段的区别是没有格式要求，任意字符串\n     \"version_name\": \"aString\",\n     // 指定本扩展在注入的目标页面上所需使用的资源的路径，指定资源路径，为String数组\n     \"web_accessible_resources\": [\"images/*.png\"]\n }</pre><p><br></p><p><br></p><p><br></p>"}}