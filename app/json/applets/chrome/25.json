{"sta":1,"data":{"subTitle":"chrome.bookmarks 书签管理","content":"<h3>一、描述</h3><p>使用 chrome.bookmarks 能够创建、组织和操作书签，能够自定义操作书签的页面。\n<br>\n<br><h3>二、权限申请\n</h3>如果要使用 chrome.bookmarks 需要在 manifest 的 permissions 中增加 bookmarks 权限申请。<br><blockquote>\"permissions\": [\"tabs\", \"bookmarks\", \"storage\"],\n</blockquote><h3>三、书签组织形式\n</h3>书签以树形式组织，树中的每个节点都是书签或文件夹（有时称为组）。<br>树中的每个节点都由 bookmarks.BookmarkTreeNode 对象表示。<br>整个 chrome.bookmarks API 都是使用 BookmarkTreeNode 属性。例如，当调用 bookmarks.create 时，传入新节点的父节点（parentId），并且可以选择传入节点的索引、标题和 URL 属性。<br>注意：无法使用 chrome.bookmarks API 添加或删除根文件夹中的条目。无法重命名、移动或删除特殊的 “书签栏” 和 “其他” 文件夹。\n<br>\n<br><h3>四、方法示例\n</h3><h4>1、chrome.bookmarks.getTree(function callback)\n</h4>获取整个书签栏的树&nbsp;<br></p><pre>btn1.onclick = () =&gt; {\n    chrome.bookmarks.getTree((res) =&gt; {\n        console.log(res);\n    })\n};</pre><p>结果示例：<br>可以发现，通过这个方法能够拿到整个书签栏的树，而最外层就是根节点，根节点没有 title，根节点的两个子节点就是 书签栏和其他书签两个，id 分别是 1 和 2</p><p><img src=\"/app/json/applets/chrome/imgs/34.jpg\" style=\"max-width:100%;\"></p><p><h4>2、chrome.bookmarks.getSubTree(string id, function callback)\n</h4>获取某个节点的子树</p><pre>btn2.onclick = () =&gt; {\n    chrome.bookmarks.getSubTree(tree[0].children[0].children[0].id, (res) =&gt; {\n        console.log(res);\n    })\n};</pre><p>上面我是从根节点的第一个子节点的第一个子节点查找的子树，可以发现父节点是 parentId: 1</p><p><img src=\"/app/json/applets/chrome/imgs/35.jpg\" style=\"max-width:100%;\"></p><p><h4>3、chrome.bookmarks.get(string or array of string idOrIdList, function callback)\n</h4>获取节点信息<br>需要注意的是，无论是什么 get 方法，每次都是返回一个 Array 类型，即使请求的是节点，返回的也是 Array</p><pre>btn3.onclick = () =&gt; {\n    chrome.bookmarks.get(\"5\", (res) =&gt; {\n        console.log(res);\n    })\n};</pre><p>结果示例：</p><p><img src=\"/app/json/applets/chrome/imgs/36.jpg\" style=\"max-width:100%;\"></p><p><h4>4、chrome.bookmarks.getChildren(string id, function callback)\n</h4>获取所有的子节点</p><pre>btn4.onclick = () =&gt; {\n    chrome.bookmarks.getChildren(\"5\", (res) =&gt; {\n        console.log(res);\n    })\n};</pre><p>可以观察下同样的节点 5，获取子树和子节点的不同</p><p><img src=\"/app/json/applets/chrome/imgs/37.jpg\" style=\"max-width:100%;\"></p><p><h4>5、chrome.bookmarks.getRecent(integer numberOfItems, function callback)\n</h4>获取最近的书签</p><pre>btn5.onclick = () =&gt; {\n    chrome.bookmarks.getRecent(5, (res) =&gt; {\n        console.log(res);\n    })\n};</pre><p>结果示例：<br>上面我设置了返回最近 5 个创建的书签</p><p><img src=\"/app/json/applets/chrome/imgs/38.jpg\" style=\"max-width:100%;\"></p><p><h4>6、chrome.bookmarks.search(string or object query, function callback)\n</h4>搜索书签</p><pre>&lt;div class=\"col-md-12\"&gt;\n  &lt;textarea id=\"textarea\" cols=\"30\" rows=\"1\"&gt;postbird&lt;/textarea&gt;\n  &lt;button id=\"btn6\" class=\"btn btn-primary\"&gt;search&lt;/button&gt;\n&lt;/div&gt;</pre><pre>btn6.onclick = () =&gt; {\n    const value = document.querySelector('#textarea').value;\n    chrome.bookmarks.search(value, (res) =&gt; {\n        console.log(res);\n    })\n};</pre><p>结果示例：<br>根据 title 搜索的都包含了 postbird</p><p><img src=\"/app/json/applets/chrome/imgs/39.jpg\" style=\"max-width:100%;\"></p><p><h4>7、chrome.bookmarks.create(object bookmark, function callback)\n</h4>创建一个书签，在指定的 parentId 下创建书签或文件夹。如果 url 为N ULL 或没有该字段，会创建一个文件夹。</p><pre>btn7.onclick = () =&gt; {\n    const title = document.querySelector('#title').value;\n    const url = document.querySelector('#url').value;\n    const obj = {\n        parentId: '5',\n        title,\n        url,\n    }\n    chrome.bookmarks.create(obj, (res) =&gt; {\n        console.log(res);\n    })\n};</pre><p>结果示例：<br>可以发现在 5 这个文件夹中已经创建了新的书签</p><p><img src=\"/app/json/applets/chrome/imgs/40.jpg\" style=\"max-width:100%;\"></p><p><h4>8、chrome.bookmarks.move(string id, object destination, function callback)\n</h4>移动书签，注意不能移动到 0 这个 root 节点中，因为不允许任何修改 root 节点的行为</p><pre>btn8.onclick = () =&gt; {\n    const dest = {\n        parentId: '1'\n    }\n    chrome.bookmarks.move('48', dest, (res) =&gt; {\n        console.log(res);\n    })\n};</pre><p>结果示例：</p><p><img src=\"/app/json/applets/chrome/imgs/41.jpg\" style=\"max-width:100%;\"></p><p><h4>9、chrome.bookmarks.update(string id, object changes, function callback)\n</h4>更新书签或文件夹的属性。仅指定要更改的属性; 未指定的属性将保持不变。注意：**目前，仅支持 title 和 url。</p><pre>btn9.onclick = () =&gt; {\n    const title = document.querySelector('#titleUpdate').value;\n    const url = document.querySelector('#urlUpdate').value;\n    const obj = {\n        title,\n        url,\n    }\n    chrome.bookmarks.update('48', obj, (res) =&gt; {\n        console.log(res);\n    })\n};</pre><p>结果示例：</p><p><img src=\"/app/json/applets/chrome/imgs/42.jpg\" style=\"max-width:100%;\"></p><p><h4>10、chrome.bookmarks.remove(string id, function callback)\n</h4>删除书签或空书签文件夹。</p><pre>chrome.bookmarks.remove('48', (res) =&gt; {\n        console.log(res);\n    })</pre><p><h4>11、chrome.bookmarks.removeTree(string id, function callback)\n</h4>删除整个书签树</p><pre>chrome.bookmarks.removeTree('5', (res) =&gt; {\n        console.log(res);\n    })</pre><p><br></p>"}}