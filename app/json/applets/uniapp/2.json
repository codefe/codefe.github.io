{"sta":1,"data":{"subTitle":"uniapp仿微信顶部导航条","content":"<p>如何可以实现像京东、淘宝、微信顶部导航栏，如加入城市定位、搜索、自定图片/图标、圆点提示。。。<br></p><p>\n<br>上面的方法是可以满足一般项目需求，但是在小程序里则失效了，而且一些复杂的导航栏就不能很好兼顾，这时只能寻求其它替代方法了\n<br>\n<br>将navigationStyle设为custom或titleNView设为false时，原生导航栏不显示，这时就能自定义导航栏</p><pre>\"pages\": [{\n\t\t\"path\": \"pages/index/index\",\n\t\t\"style\": {\n\t\t\t\"navigationBarTitleText\": \"demo\",\n\t\t\t\"navigationStyle\": \"custom\" \n\t\t}\n\t},</pre><p>这里要注意的是，H5、小程序、App端状态栏都不一样，需要重新计算处理，我这里已经处理好了，可直接使用，在App.vue里面设置即可</p><pre>onLaunch: function() {\n    uni.getSystemInfo({\n        success:function(e){\n            Vue.prototype.statusBar = e.statusBarHeight\n            // #ifndef MP\n            if(e.platform == 'android') {\n                Vue.prototype.customBar = e.statusBarHeight + 50\n            }else {\n                Vue.prototype.customBar = e.statusBarHeight + 45\n            }\n            // #endif\n            \n            // #ifdef MP-WEIXIN\n            let custom = wx.getMenuButtonBoundingClientRect()\n            Vue.prototype.customBar = custom.bottom + custom.top - e.statusBarHeight\n            // #endif\n            \n            // #ifdef MP-ALIPAY\n            Vue.prototype.customBar = e.statusBarHeight + e.titleBarHeight\n            // #endif\n        }\n    })\n},</pre><p>啧啧啧，看下面的效果，是不是觉得很眼熟，没错，就是基于uni-app简单的实现了一个仿微信顶部导航条\n<br>\n<br>顶部的图标使用iconfont字体图标、另外还可自定传入图片</p><p><img src=\"/app/json/applets/uniapp/img/2.png\" style=\"max-width:100%;\" class=\"\"></p><pre>&lt;header-bar :isBack=\"false\" title=\"标题信息\" titleTintColor=\"#fff\"&gt;\n    &lt;text slot=\"back\" class=\"uni_btnIco iconfont icon-arrL\"&gt;&lt;/text&gt;\n    &lt;text slot=\"iconfont\" class=\"uni_btnIco iconfont icon-search\" @tap=\"aaa\"&gt;&lt;/text&gt;\n    &lt;text slot=\"iconfont\" class=\"uni_btnIco iconfont icon-tianjia\" @tap=\"bbb\"&gt;&lt;/text&gt;\n    &lt;!-- &lt;text slot=\"string\" class=\"uni_btnString\" @tap=\"ccc\"&gt;添加好友&lt;/text&gt; --&gt;\n    &lt;image slot=\"image\" class=\"uni_btnImage\" src=\"../../static/logo.png\" mode=\"widthFix\" @tap=\"ddd\"&gt;&lt;/image&gt;\n&lt;/header-bar&gt;</pre><p><img src=\"/app/json/applets/uniapp/img/3.png\" style=\"max-width:100%;\"></p><p><img src=\"/app/json/applets/uniapp/img/4.png\" style=\"max-width:100%;\"></p><p><img src=\"/app/json/applets/uniapp/img/5.png\" style=\"max-width:100%;\" class=\"\"></p><pre>&lt;header-bar :isBack=\"true\" titleTintColor=\"#fff\" :bgColor=\"{'background-image': 'linear-gradient(45deg, #007AFF 10%, #005cbf)'}\" search&gt;\n    &lt;text slot=\"back\" class=\"uni_btnIco iconfont icon-arrL\"&gt;&lt;/text&gt;\n    &lt;text slot=\"iconfont\" class=\"uni_btnIco iconfont icon-choose03\" @tap=\"aaa\"&gt;&lt;/text&gt;\n    &lt;image slot=\"image\" class=\"uni_btnImage\" src=\"../../static/logo.png\" mode=\"widthFix\" @tap=\"ddd\"&gt;&lt;/image&gt;\n&lt;/header-bar&gt;</pre><p><img src=\"/app/json/applets/uniapp/img/6.png\" style=\"max-width:100%;\"></p><p><img src=\"/app/json/applets/uniapp/img/7.png\" style=\"max-width:100%;\"></p><pre>&lt;header-bar :isBack=\"true\" title=\"我的\" titleTintColor=\"#fff\" :bgColor=\"{background: '#353535'}\"&gt;\n    &lt;text slot=\"back\" class=\"uni_btnIco iconfont icon-close\"&gt;&lt;/text&gt;\n    &lt;text slot=\"iconfont\" class=\"uni_btnIco iconfont icon-search\"&gt;&lt;/text&gt;\n    &lt;text slot=\"string\" class=\"uni_btnString\" style=\"color: #2B9939;\"&gt;添加好友&lt;/text&gt;\n&lt;/header-bar&gt;</pre><p>支持传入的属性，另外还用到了vue插槽slot</p><p><img src=\"/app/json/applets/uniapp/img/8.png\" style=\"max-width:100%;\"></p><pre>/***\n　　isBack              是否返回按钮\n　　title               标题\n　　titleTintColor      标题颜色\n　　bgColor             背景\n　　center              标题居中\n　　search              搜索条\n　　searchRadius        圆形搜索条\n　　fixed               是否固定\n*/</pre><pre>&lt;template&gt;\n    &lt;view class=\"uni_topbar\" :style=\"style\"&gt;\n        &lt;view class=\"inner flexbox flex_alignc\" :class=\"[fixed ? 'fixed' : '']\" :style=\"[{'height': customBarH + 'px', 'padding-top': statusBarH + 'px', 'color': titleTintColor}, bgColor]\"&gt;\n            &lt;!-- 返回 --&gt;\n            &lt;!-- &lt;text class=\"uni_icoBack iconfont icon-arrL\" v-if=\"isBack\" @tap=\"goBack\"&gt;&lt;/text&gt; --&gt;\n            &lt;view v-if=\"isBack\" @tap=\"goBack\"&gt;\n                &lt;slot name=\"back\"&gt;&lt;/slot&gt;\n            &lt;/view&gt;\n            &lt;slot name=\"headerL\"&gt;&lt;/slot&gt;\n            &lt;!-- 标题 --&gt;\n            &lt;!-- #ifndef MP --&gt;\n            &lt;view class=\"flex1\" v-if=\"!search &amp;&amp; center\"&gt;&lt;/view&gt;\n            &lt;!-- #endif --&gt;\n            &lt;view class=\"uni_title flex1\" :class=\"[center ? 'uni_titleCenter' : '']\" :style=\"[isBack ? {'font-size': '32upx', 'padding-left': '0'} : '']\" v-if=\"!search &amp;&amp; title\"&gt;\n                {{title}}\n            &lt;/view&gt;\n            &lt;view class=\"uni_search flex1\" :class=\"[searchRadius ? 'uni_searchRadius' : '']\" v-if=\"search\"&gt; /&gt;\n                &lt;input class=\"uni_searchIpt flex1\" type=\"text\" placeholder=\"搜索\" placeholder-style=\"color: rgba(255,255,255,.5);\" /&gt;\n            &lt;/view&gt;\n            &lt;!-- 右侧 --&gt;\n            &lt;view class=\"uni_headerRight flexbox flex_row flex_alignc\"&gt;\n                &lt;slot name=\"iconfont\"&gt;&lt;/slot&gt;\n                &lt;slot name=\"string\"&gt;&lt;/slot&gt;\n                &lt;slot name=\"image\"&gt;&lt;/slot&gt;\n            &lt;/view&gt;\n        &lt;/view&gt;\n    &lt;/view&gt;\n&lt;/template&gt;\n\n&lt;script&gt;\n    export default {\n        data() {\n            return {\n                statusBarH: this.statusBar,\n                customBarH: this.customBar\n            }\n        },\n        props: {\n            isBack: { type: [Boolean, String], default: true },\n            title: { type: String, default: '' },\n            titleTintColor: { type: String, default: '#fff' },\n            bgColor: Object,\n            center: { type: [Boolean, String], default: false },\n            search: { type: [Boolean, String], default: false },\n            searchRadius: { type: [Boolean, String], default: false },\n            fixed: { type: [Boolean, String], default: false },\n        },\n        computed: {\n            style() {\n                let _style = `height: ${this.customBarH}px;`\n                return _style\n            }\n        },\n        methods: {\n            goBack() {\n                uni.navigateBack()\n            }\n        }\n    }\n&lt;/script&gt;</pre><p><br></p><p><br></p><p><br></p><p><br></p>"}}