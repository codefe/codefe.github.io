{"sta":1,"data":{"subTitle":"使用Notification API实现html5桌面通知","content":"<p>html5的桌面通知我相信大家并不陌生。常见的有网页版的微信等应用，需要设置桌面通知功能才可以使用。<br>用客户端程序实现这样的功能并不难。而传统的网页版的桌面通知可以写一个div放到页面右下角自动弹出来，并通过轮询等等其他方式去获取消息并推送给用户。这种方式有个弊端就是：当我在使用淘宝进行购物的时候，我是不知道微博有消息推送过来给我的，而必须要等我把当前页面切到新浪微博才知道有消息推送了。这种方式的消息推送它是基于页面存活的， 但是我们需要这么一种策略：无论你在看哪个页面，只要有消息都应该能推送给我看到，这就是webkitNotification要解决的问题。Notification生成的消息不依附于某个页面，仅仅依附于浏览器。<br>Notification目前还没有标准化，所以你在w3cschool等网站上是学习不到的。但是目前主流浏览器大部分都支持Notification。<br></p><pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n\n&lt;head&gt;\n    &lt;meta charset=\"utf-8\"&gt;\n    &lt;title&gt;html5桌面通知&lt;/title&gt;\n&lt;/head&gt;\n\n&lt;body&gt;\n    &lt;input type=\"button\" value=\"开启桌面通知\" onclick=\"showNotice();\"&gt;\n    &lt;script&gt;\n        function showNotice() {\n            Notification.requestPermission(function (status) {\n                //status默认值'default'等同于拒绝 'denied' 意味着用户不想要通知 'granted' 意味着用户同意启用通知\n                if (\"granted\" != status)\n                    return;\n                var notify = new Notification(\"消息\", {\n                    dir: 'auto',\n                    lang: 'zh-CN',\n                    tag: 'sds',//实例化的notification的id\n                    //icon 支持ico、png、jpg、jpeg格式\n                    icon: 'http://www.xttblog.com/icons/favicon.ico',//通知的缩略图\n                    body: 'html5桌面通知' //通知的具体内容\n                });\n                notify.onclick = function () {\n                    //如果通知消息被点击,通知窗口将被激活\n                    window.focus();\n                }\n            });\n        }\n    &lt;/script&gt;\n&lt;/body&gt;\n\n&lt;/html&gt;</code></pre><p><br></p>"}}