{"sta":1,"data":{"subTitle":"获取电池状态的Promises用法","content":"<p>这个API仍然是<code>navigator</code>对象提供的，但现在它叫做<code>getBattery</code>：&nbsp;</p><blockquote>&nbsp;navigator.getBattery().then(function(result) {});</blockquote><p>通过对getBattery()的调用，我们得到一个promise，这个promise会回调then方法，并提供一个BatteryManager对象，下面是对这个BatteryManager对象的说明：</p><pre><code>// result:\nBatteryManagery {\n\tcharging: false,\n\tchargingTime: Infinity,\n\tdischargingTime: 8940,\n\tlevel: 0.59,\n\tonchargingchange: null,\n\tonchargingtimechange: null,\n\tondischargingtimechange: null,\n\tonlevelchange: null\n}</code></pre><p></p><p>这个新的API执行的方式有些区别，但返回的结果非常相似。还记得旧的电池状态API的用法吗，它在Mac设备电池有些问题，而新的API适合并没有任何改善。使用浏览器引擎前缀是一个解决方案，但实在是让人恶心。希望各浏览器尽快升级，给程序员更好的编程体验。</p>"}}