{"sta":1,"data":{"subTitle":"document.visibilityState","content":"<p>这个 API 主要在<code>document</code>对象上，新增了一个<code>document.visibilityState</code>属性。该属性返回一个字符串，表示页面当前的可见性状态，共有三个可能的值。<br></p><pre><code>hidden：页面彻底不可见。\nvisible：页面至少一部分可见。\nprerender：页面即将或正在渲染，处于不可见状态。</code></pre><p>其中，hidden状态和visible状态是所有浏览器都必须支持的。prerender状态只在支持\"预渲染\"的浏览器上才会出现，比如 Chrome 浏览器就有预渲染功能，可以在用户不可见的状态下，预先把页面渲染出来，等到用户要浏览的时候，直接展示渲染好的网页。\n<br>\n<br>只要页面可见，哪怕只露出一个角，document.visibilityState属性就返回visible。只有以下四种情况，才会返回hidden。</p><pre><code>浏览器最小化。\n浏览器没有最小化，但是当前页面切换成了背景页。\n浏览器将要卸载（unload）页面。\n操作系统触发锁屏屏幕。</code></pre><p>可以看到，上面四种场景涵盖了页面可能被卸载的所有情况。也就是说，页面卸载之前，document.visibilityState属性一定会变成hidden。事实上，这也是设计这个 API 的主要目的。\n<br>\n<br>另外，早期版本的 API，这个属性还有第四个值unloaded，表示页面即将卸载，现在已经被废弃了。\n<br>\n<br>注意，document.visibilityState属性只针对顶层窗口，内嵌的&lt;iframe&gt;页面的document.visibilityState属性由顶层窗口决定。使用 CSS 属性隐藏&lt;iframe&gt;页面（比如display: none;），并不会影响内嵌页面的可见性。</p>"}}