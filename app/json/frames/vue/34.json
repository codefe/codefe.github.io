{"sta":1,"data":{"subTitle":"Vue2.0 子组件修改父组件的数据","content":"<h3>一、需求</h3><p>1、问题\n<br>Vue 2.0 中已经不允许子组件修改父组件的传值内容。<br>Vue1.0 中可以使用 Sync 的方式子组件直接复制修改父组件传值的内容，从而能够使数据进行同步。<br>但是Vue2.0已经默认不允许同步修改，如果需要用到修改数据的方式只能使用折中的方式。\n<br>\n<br><h3>二、解决\n</h3>1、方案\n<br>再怎么发展的框架也是离不开javascript。<br>javascript 中对象的传递是传递的 对象引用，因此利用此特性也能完成子组件对父组件的内容修改。\n<br>\n<br>2、前提\n<br>数据传输为对象\n<br>\n<br>因此父组件的data内容是：</p><pre>var app= new Vue({\n    el: '#app',\n    data: {\n        msg: {\"name\": 'ptbird'}\n    },\n    template: '#aaa',\n})</pre><p>在父组件中加入子组件：</p><pre>components:{\n        'bbb':{\n            template:'#bbb',\n            props:['msg'],\n            methods:{\n                changeName(){\n                    this.msg.name=\"Postbird\"\n                }\n            }\n        }\n    }</pre><p>可以看到,bbb 子组件接收从 aaa 父组件传递的数值的时候，参数名是 msg （这个msg和aaa 中dada 的msg不是一个概念）\n<br>而 aaa 和 bbb 的 template 的组织形式如下：</p><pre>&lt;template id=\"aaa\"&gt;\n    &lt;div&gt;\n        &lt;h1&gt;父组件 - 数据【{{msg.name}}】&lt;/h1&gt;\n        &lt;hr&gt;\n        &lt;!--在向B组件传递内容的时候传递的是msg 因此B的props中应该使用 props:['msg']--&gt;\n        &lt;bbb :msg=\"msg\"&gt;&lt;/bbb&gt;\n    &lt;/div&gt;\n&lt;/template&gt;\n&lt;template id=\"bbb\"&gt;\n    &lt;div&gt;\n        &lt;h2&gt;子组件 - 数据【{{msg.name}}】&lt;/h2&gt;\n        &lt;button @click=\"changeName\"&gt;修改Name&lt;/button&gt;\n    &lt;/div&gt;\n&lt;/template&gt;\n&lt;div id=\"app\"&gt;\n    &lt;aaa&gt;&lt;/aaa&gt;\n&lt;/div&gt;</pre><p>在 bbb 子组件中，changeName 的方法只是改变了 this.msg.name , 但是因为对象的传递传递的是引用，因此实际上此时aaa 父组件的name也已经改动了</p><h3>三、完整的示例</h3><pre>&lt;!DOCTYPE html&gt;\n&lt;html lang=\"en\"&gt;\n&lt;head&gt;\n    &lt;meta charset=\"UTF-8\"&gt;\n    &lt;title&gt;子组件修改父组件数据&lt;/title&gt;\n    &lt;script src=\"./lib/vue.js\"&gt;&lt;/script&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;template id=\"aaa\"&gt;\n    &lt;div&gt;\n        &lt;h1&gt;父组件 - 数据【{{msg.name}}】&lt;/h1&gt;\n        &lt;hr&gt;\n        &lt;bbb :msg=\"msg\"&gt;&lt;/bbb&gt;\n    &lt;/div&gt;\n&lt;/template&gt;\n&lt;template id=\"bbb\"&gt;\n    &lt;div&gt;\n        &lt;h2&gt;子组件 - 数据【{{msg.name}}】&lt;/h2&gt;\n        &lt;button @click=\"changeName\"&gt;修改Name&lt;/button&gt;\n    &lt;/div&gt;\n&lt;/template&gt;\n&lt;div id=\"app\"&gt;\n    &lt;aaa&gt;&lt;/aaa&gt;\n&lt;/div&gt;\n&lt;/body&gt;\n&lt;script&gt;\nwindow.onload=function(){\nvar app= new Vue({\n    el:'#app',\n    data:{\n        msg:{\"name\":'ptbird'}\n    },\n    template:'#aaa',\n    components:{\n        'bbb':{\n            template:'#bbb',\n            props:['msg'],\n            methods:{\n                changeName(){\n                    this.msg.name=\"Postbird\"\n                }\n            }\n        }\n    }\n})\n}\n&lt;/script&gt;\n&lt;/html&gt;</pre><p><br></p>"}}