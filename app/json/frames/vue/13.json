{"sta":1,"data":{"subTitle":"高精度全局权限处理","content":"<p>权限控制由前端处理时，通常使用 v-if / v-show 控制元素对不同权限的响应效果。这种情况下，就会导致很多不必要的重复代码，不容易维护，因此可以造一个小车轮，挂在全局上对权限进行处理。<br></p><pre><code>// 注册全局自定义指令，对底层原生DOM操作\n  Vue.directive('permission', {\n        // inserted → 元素插入的时候\n        inserted(el, binding){\n            // 获取到 v-permission 的值\n            const { value } = binding\n            if(value) {\n                // 根据配置的权限，去当前用户的角色权限中校验\n                const hasPermission = checkPermission(value)\n                if(!hasPermission){\n                    // 没有权限，则移除DOM元素\n                    el.parentNode &amp;&amp; el.parentNode.removeChild(el)\n                }\n            } else{\n                throw new Error(`need key! Like v-permission=\"['admin','editor']\"`)\n            }\n        }\n    })\n    // --&gt; 在组件中使用 v-permission\n    &lt;button v-permission=\"['admin']\"&gt;权限1&lt;/button&gt;\n    &lt;button v-permission=\"['admin', 'editor']\"&gt;权限2&lt;/button&gt;</code></pre><p><br></p>"}}