{"sta":1,"data":{"subTitle":"源码及后记","content":"<p>总共几个文件，<code>app.vue</code>，封装的全局上传组件<code>globalUploader.vue</code>，调用组件的<code>demo.vue</code>，源码放到github上了：<a href=\"https://github.com/shady-xia/Blog/tree/master/vue-simple-uploader\" target=\"_blank\">https://github.com/shady-xia/Blog/tree/master/vue-simple-uploader</a>。</p><p><code>globalUploader</code>源码中的<code>ticket</code>和<code>api</code>都是自己用的， 一个是accesstoken，一个是基于axios封装的请求库，请根据你的业务需求替代之。另外上传界面的展开和收起用到了<code>jquery</code>，通知用到了Element的组件，请忽略之。</p><h3>关于第一个分片丢失问题</h3><p>关于开启了testChunk后服务器收不到第一个分片的问题：\n<br>simpleUploader文档上是这么写的：</p><p></p><p></p><p><img src=\"./app/json/frames/vueSimpleUploader/img/9.png\" style=\"max-width:100%;\"></p><p>testChunk的那个get请求，默认带了第一个分片给服务端，如果服务端返回的是200状态，则假定当前块已经上传过了，不会再上传了；\n<br>所以这里服务器要改成其他http状态码，比如204，这样就不在“ 200, 201, 202”这个集合里了，代表服务端还没有这个块，需要按照标准模式上传，这样第一个分片就会再次被上传了</p>"}}