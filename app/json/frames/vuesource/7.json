{"sta":1,"data":{"subTitle":"Vue中事件绑定原理","content":"<p>Vue 中事件绑定分为两种：</p><p>原生事件绑定: 采用的是 addEventListener 实现\n<br>组件事件绑定: 采用的是 $on 方法实现</p><p>&nbsp;\n<br>以 click 事件为例，普通 Dom 元素绑定事件是 @click ，编译出来是 on 和 click事件，组件绑定事件是 @click 组件自定义事件 和 @click.native原生事件两种，编译出来分别是 on 和 click 事件， nativeOn 和 click 事件。组件的 nativeOn 等价于普通元素的 on ，而组件的 on 单独处理。\n<br>渲染页面时，普通 Dom 会调用 updateDOMListeners 方法，内部先把 data.on 方法拿出来，然后调用 updateListeners 方法来添加一个监听事件，同时会传入一个 add$1 方法。内部调用 addEventListener 方法直接把事件绑定到元素上。\n<br>\n<br>而组件会调用 updateComponentListeners 方法。内部也是调用 updateListeners 方法但传入的是 add 方法。这里的 add 方法与普通元素的 Dom 的 add$1 方法略有不同，采用的是自己定义的发布订阅模式 $on 方法，解析的是 on 方法，组件内部通过 $emit 方法触发的。还有 click.native 方法是直接把事件绑在了最外层元素上，用的也是 updateListeners 方法传入 add$1方法。</p>"}}